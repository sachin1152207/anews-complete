<!doctype html>
<html lang="en">

<head>
    <style>
        d.none{
            display: none;
        }
    </style>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% if admin == 1 %}
  <title>Admin Dashboard | Anews</title>
  {% else %} 
  <title>{{user[2]}}| Anews</title>
{% endif %}
    <link rel="shortcut icon" href="{{ url_for('static', filename='./assest/icon/favicon-32x32.png')}}"
        type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='assest/style/admin_style.css')}}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>

<body>
    <section class="d-flex">

        <!-- SiderBar -->
        <div class="d-flex flex-column flex-shrink-0 p-3 text-bg-dark" style="width: 280px;">
            <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                <img src="{{ url_for('static', filename='./assest/icon/anews_logo.png')}}" class="bi pe-none me-2"
                    width="60" height="32" alt="">
                <span class="fs-4"><b>Anews Nepal</b></span>


            </a>
            <hr>
            <ul class="nav nav-pills flex-column mb-auto">
                <li class="nav-item">
                    <a href="/admin/dashboard" class="nav-link text-white align-items-center d-flex"
                        aria-current="page">
                        <img src="{{ url_for('static', filename='./assest/icon/home.png')}}" class="bi pe-none me-2"
                            width="18" height="16" alt="">
                        Home
                    </a>
                </li>
                {% if admin == 1 %}
                
                <li>
                    <a href="/admin/promotion" class="nav-link text-white align-items-center d-flex">
                        <img src="{{ url_for('static', filename='./assest/icon/promotion.png')}}"
                            class="bi pe-none me-2" width="18" height="16" alt="">
                        Promotion
                    </a>
                </li>
                <li>
                    <a href="/admin/feature" class="nav-link text-white align-items-center d-flex">
                        <img src="{{ url_for('static', filename='./assest/icon/gallery.png')}}" class="bi pe-none me-2"
                            width="18" height="16" alt="">
                        Feature
                    </a>
                </li>
                <li>
                    <a href="/admin/catogories" class="nav-link text-white align-items-center d-flex">
                        <img src="{{ url_for('static', filename='./assest/icon/catogories.png')}}"
                            class="bi pe-none me-2" width="18" height="16" alt="">
                        Catogories
                    </a>
                </li>
                <li>
                    <a href="/admin/all-news" class="nav-link text-white align-items-center d-flex">
                        <img src="{{ url_for('static', filename='./assest/icon/list.png')}}" class="bi pe-none me-2"
                            width="18" height="16" alt="">
                        All News
                    </a>
                </li>
                <li>
                    <a href="/admin/gallery" class="nav-link active align-items-center d-flex">
                        <img src="{{ url_for('static', filename='./assest/icon/admingallery.png')}}"
                            class="bi pe-none me-2" width="20" height="18" alt="">
                        Gallery
                    </a>
                </li>
                <li>
                    <a href="/admin/account" class="nav-link text-white align-items-center d-flex">
                        <img src="{{ url_for('static', filename='./assest/icon/gears.png')}}" class="bi pe-none me-2" width="20" height="20" alt="">
                        Account
                    </a>
                </li>
                {% else %}
                
                <li>
                    <a href="/admin/gallery" class="nav-link active align-items-center d-flex">
                        <img src="{{ url_for('static', filename='./assest/icon/admingallery.png')}}"
                            class="bi pe-none me-2" width="20" height="18" alt="">
                        Gallery
                    </a>
                </li>
                {% endif %}
            </ul>
            <hr>
            <div class="dropdown">
                <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    {% if admin == 1 %}
                    <img src="{{url_for('static', filename='./assest/icon/anews_logo.png')}}" alt="" class="rounded-circle me-2" width="32" height="32">
                    <strong>Admin</strong>
                    {% else %} 
                    <img src="{{url_for('static', filename='./uploads/user/' + user[5])}}" alt="" class="rounded-circle me-2" width="32" height="32">
                    <strong>{{user[2]}}</strong>
                    {% endif %}
                </a>
                <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
                    {% if admin == 1 %}
            <li><a class="dropdown-item" href="/admin/account">Settings</a></li>
            {% else %}
            {% endif %}
                    <li><a class="dropdown-item" href="/admin/profile">Profile</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="/admin/logout">Sign out</a></li>
                </ul>
            </div>

        </div>

        <section class="ms-4 mt-4">
            <!-- Slider News -->
            <div class="row g-3">
                <form action="/admin/gallery" method="post" enctype="multipart/form-data">
                    <section class="d-flex align-content-center gap-3">
                        <div class="col-auto d-flex justify-center align-items-center">
                            <label for="inputPassword6" class="col-form-label">
                                <h5 class="m-0">Upload Image</h5>
                            </label>
                        </div>
                        <div class="col-auto sliding-news m-0 p-0 d-flex justify-center align-items-center" style="  width: 45rem !important;">
                            <input type="file" name="galleryImage" class="form-control "
                                aria-describedby="passwordHelpInline">
                        </div>
                        <div class="col-auto form-check mt-2 ms-0 ps-1 d-flex align-items-center">
                            <label class="form-check-label ms-0" for="defaultCheck1">Compress: </label>
                            <input class="form-check-input ms-2" type="checkbox" value="True" name="compress" id="defaultCheck1">
                          </div>
                        <div class="col-auto m-0 p-0 d-flex justify-center align-items-center">
                            <input type="submit" class="btn btn-primary" value="Upload">
                        </div>
                    </section>
                </form>
            </div>

            <!-- Gallery Image -->
            <section class="mt-2 pe-4">
                <h4 class="mb-2 d-flex align-items-center">Your Gallery <h6 class="text-secondary"> Total Image: {{len(Totalimg)}}({{size}})</h6></h4>

                <div class="row">
                    {% for im in img %}
                    <div class="col-3 mb-2">
                        <div class="card" style="width: 18rem;">
                            <img src="{{ url_for('static', filename='uploads/' + im)}}"
                                class="card-img-top" alt="..." style="height: 13rem;">
                            <div
                                class="card-body border border-bottom-0 border-end-0 border-start-0 d-flex justify-content-around align-items-center">
                                <a id="{{ url_for('static', filename='uploads/' + im)}}" class="btn btn-primary" onclick="copyTextToClipboard(this.id)">Copy Link</a>
                                <a href="/admin/gallery/download?filename=static/uploads/{{im}}" class="btn btn-secondary">Save</a>
                                <a href="/admin/gallery/delete?filename=static/uploads/{{im}}" class="btn btn-danger">Delete</a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    
                </div>
                <!-- Pagination -->
                <div class="d-flex justify-content-center align-content-center mt-2 w-100">
                    <nav aria-label="Page navigation example">
                        <ul class="pagination">
                            <li class="page-item">
                                <a class="page-link" href="{{prev}}" aria-label="Previous">
                                    <span aria-hidden="true">&laquo; Prev</span>
                                </a>
                            </li>

                            <li class="page-item">
                                <a class="page-link" href="{{next}}" aria-label="Next">
                                    <span aria-hidden="true">Next &raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </section>




        </section>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='./assest/script/anews_script.js')}}"></script>
    <script src="https://cdn.ckeditor.com/4.10.0/standard/ckeditor.js"></script>
    <script>
        
function copyTextToClipboard(id) {
  var textArea = document.createElement("textarea");
  textArea.value = location.href.split("/admin/gallery")[0] + id;
//   textArea.classList.add('d-none')
  document.body.appendChild(textArea);
  textArea.select();
  document.execCommand("Copy");
  textArea.remove();

}
    </script>
</body>

</html>